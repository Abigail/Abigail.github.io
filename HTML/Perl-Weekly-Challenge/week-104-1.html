<html>
<head>
<title>Perl Weekly Challenge 104: FUCS Sequence</title>
<script src = "https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id = "MathJax-script" async src = "https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.js"></script>
<script src = '../../JavaScript/jquery.js'></script>
<script src = '../../JavaScript/navigation.js'></script>
<link rel = 'preconnect' href = 'https://fonts.gstatic.com'>
<link rel = 'stylesheet' href = 'https://fonts.googleapis.com/css2?family=Lobster+Two&family=Source+Code Pro&family=Pinyon+Script&family=Sorts+Mill Goudy:ital@1&display=swap'>
<link rel = 'stylesheet' href = '../../Styles/Perl-Weekly-Challenge/main.css'>
</head>

<body><h1>Perl Weekly Challenge 104: FUCS Sequence</h1><div class = "byline">
by Abigail<br>
<img src = "../../Images/jan_sluiters.jpg">
</div>


<h2><a href="https://theweeklychallenge.org/blog/perl-weekly-challenge-104/#TASK1">Challenge</a></h2>

<blockquote>
  <p>Write a script to generate first 50 members of FUSC Sequence.
  Please refer to <a href="http://oeis.org/A002487">OEIS</a> for more information.</p>
  
  <p>The sequence defined as below:</p>

<pre><code>fusc(0) = 0
fusc(1) = 1
for n &gt; 1:
when n is even: fusc(n) = fusc(n / 2),
when n is odd: fusc(n) = fusc((n-1)/2) + fusc((n+1)/2)
</code></pre>
</blockquote>

<h2>Solutions</h2>

<div class = "section">
<p>Remember what the first rule of optimization is? <em>Don't do anything
which is not needed.</em> We could write some code which performs the
steps above, and we would certainly do so if the challenged asked
to for the <code>N</code>th number in the FUSC sequence, where <code>N</code> is given
as input.</p>

<p>But we're not asked to do that. We're asked to generate the first
50 numbers. We don't need to do any calculations; we can just reuse
the work done by the OEIS, and grab <a href="https://oeis.org/A002487/list">its list of first 92 numbers
of the FUSC sequence</a>.</p>

<p>The challenge then reduces to a glorified <a href="https://www.rosettacode.org/wiki/Hello_world/Text">Hello,
World!</a> program.</p>
</div>

<h3>Perl</h3>

<pre><code>say "0 1 1 2 1 3 2 3 1 4 3 5 2 5 3 4 1 5 4 7 3 8 5 7 2 7 " .
    "5 8 3 7 4 5 1 6 5 9 4 11 7 10 3 11 8 13 5 12 7 9 2 9";
</code></pre>

<p>There is not much to say. We're just printing the first 50 numbers.</p>

<p>Find the <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/perl/ch-1.pl">full program</a> on <a href="https://github.com">GitHub</a>.</p>

<h3>Other languages</h3>

<div class = "section">
<p>We have solved this in a bunch of different languages as well. We're not going to reproduce the code here, just links to the programs on GitHub:
<a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/awk/ch-1.awk">AWK</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/bash/ch-1.sh">Bash</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/basic/ch-1.bas">Basic</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/befunge-93/ch-1.bf93">Befunge-93</a>,
<a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/bc/ch-1.bc">bc</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/c/ch-1.c">C</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/cobol/ch-1.cb">Cobol</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/c-shell/ch-1.c-shell">C-shell</a>, 
<a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/erlang/ch-1.erl">Erlang</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/forth/ch-1.fs">Forth</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/fortran/ch-1.f90">Fortran</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/go/ch-1.go">Go</a>, 
<a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/java/ch-1.java">Java</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/lua/ch-1.lua">Lua</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/m4/ch-1.m4">m4</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/node/ch-1.js">Node.js</a>, 
<a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/ocaml/ch-1.ml">OCaml</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/pascal/ch-1.p">Pascal</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/php/ch-1.php">PHP</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/python/ch-1.py">Python</a>, 
<a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/r/ch-1.r">R</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/rexx/ch-1.rexx">Rexx</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/ruby/ch-1.rb">Ruby</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/scheme/ch-1.scm">Scheme</a>, 
<a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/sed/ch-1.sed">sed</a>, <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/sql/ch-1.sql">SQL</a>, and <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/tcl/ch-1.tcl">Tcl</a>.</p>
</div>

<h2>Alternative solution</h2>

<div class = "section">
<p>We decided to write a solution which does the calculations anyway.
The given definitions transforms easily to code &mdash; but we're using
a cache to avoid repeatedly calculating the same expression.</p>
</div>

<h3>Perl</h3>

<pre><code>my $AMOUNT_OF_NUMBERS_TO_PRODUCE = 50;

sub fusc;
sub fusc ($n) {
    state $cache = {0 =&gt; 0, 1 =&gt; 1};
    $$cache {$n} //= do {$n % 2 ? fusc (($n - 1) / 2) + fusc (($n + 1) / 2)
                                : fusc  ($n      / 2)}
}

say join " " =&gt; map {fusc $_} 0 .. $AMOUNT_OF_NUMBERS_TO_PRODUCE - 1;
</code></pre>

<p>We have a cache <code>$cache</code> which is initialized with the values for
<code>0</code> and <code>1</code>. (Note that a <code>state</code> variable keeps its value even if
the block is entered more than once; the assignment is only done
the first time the block is entered).</p>

<p>Then if the value isn't in the cache yet, we calculate it using
recursion. Finally, we return the wanted value.</p>

<p>Find the <a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/perl/ch-1.pl">full program</a> on <a href="https://github.com">GitHub</a>.</p>

<h3>Other languages</h3>

<p>We implemented the same algorithm in a bunch of different languages
as well. Again, we're just providing links, as all solutions follow
the same algorithm:
<a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/awk/ch-1a.awk">AWK</a>,
<a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/bash/ch-1a.sh">Bash</a>,
<a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/c/ch-1a.c">C</a>,
<a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/lua/ch-1a.lua">Lua</a>,
<a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/node/ch-1a.js">Node.js</a>,
<a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/python/ch-1a.py">Python</a>, and
<a href="https://github.com/Abigail/perlweeklychallenge-club/blob/master/challenge-104/abigail/ruby/ch-1a.rb">Ruby</a>.</p>

<hr id = 'last-line'>
<div class = 'trailer'>
<p class = 'prev'><a class = "prev" href = "">&#x261C;</a></p>
<p class = 'issue'>Please leave any comments as a
  <a href = 'https://github.com/Abigail/Abigail.github.io/issues'
     title = 'GitHub issue'>GitHub issue</a>.
<p class = 'next'><a class = "next" href = "">&#x261E;</a></p>
</div>

</body>
</html>
