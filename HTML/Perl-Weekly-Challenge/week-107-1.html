<html>
<head>
<title>Perl Weekly Challenge 107: Self-descriptive Numbers</title>
<script src = "https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id = "MathJax-script" async src = "https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.js"></script>
<link rel = 'stylesheet' href = '../../Styles/Perl-Weekly-Challenge/main.css'><link rel = 'stylesheet' href = '../../Styles/Perl-Weekly-Challenge/week-107-1.css'>
<link rel = 'stylesheet' href = 'https://fonts.googleapis.com/css?family=Lobster+Two'>
<link rel = 'stylesheet' href = 'https://fonts.googleapis.com/css?family=Source+Code Pro&display=swap'>
</head>

<body><h1>Perl Weekly Challenge 107: Self-descriptive Numbers</h1>

<h2><a href="https://perlweeklychallenge.org/blog/perl-weekly-challenge-107/#TASK1">Challenge</a></h2>

<blockquote>
  <p>Write a script to display the first three self-descriptive numbers.
  As per <a href="https://en.wikipedia.org/wiki/Self-descriptive_number">wikipedia</a>,
  the definition of Self-descriptive Number is</p>
  
  <blockquote>
    <p>In mathematics, a self-descriptive number is an integer <code>m</code> that in
    a given base <code>b</code> is <code>b</code> digits long in which each digit <code>d</code> at position
    <code>n</code> (the most significant digit being at position <code>0</code> and the least
    significant at position <code>b - 1</code>) counts how many instances of
    digit <code>n</code> are in <code>m</code>.</p>
  </blockquote>
</blockquote>

<h3>Example</h3>

<div class = "section">
<p><code>1210</code> is a four-digit self-descriptive number:</p>

<ul>
<li>position <code>0</code> has value <code>1</code> i.e. there is only one <code>0</code> in the number</li>
<li>position <code>1</code> has value <code>2</code> i.e. there are two <code>1</code> in the number</li>
<li>position <code>2</code> has value <code>1</code> i.e. there is only one <code>2</code> in the number</li>
<li>position <code>3</code> has value <code>0</code> i.e. there is no <code>3</code> in the number</li>
</ul></div>

<h3>Output</h3>

<pre><code>1210, 2020, 21200
</code></pre>

<h2>Discussion</h2>

<div class = "section">
<p>In essence, this is just a <a href="https://en.wikipedia.org/wiki/%22Hello,_World!%22_program"><code>Hello, World!</code></a>
program. We don't even need to go to the <a href="https://oeis.org/A138480">OEIS</a> to find
the first three numbers &mdash; the challenge tells us what the output is!</p>

<p>To still have a tiny bit of a challenge, we will derive what the
first three self-describing numbers are.</p>

<p>Let \(N_b\) be a self-describing number in base \(b\). \(N_b\) has \(b\)
digits: \(N = d_{0} d_{1} \ldots d_{b-1}\). We then have the following
observations:</p>

<ol>
<li>\(0 &lt; d_0\): we do not accept a leading \(0\).</li>
<li>\(b = \sum_{i=0}^{b-1} d_i\). This follows from the definition
of a self-describing number: the sum of the digits must equal
the number of digits, and the number of digits is \(b\).</li>
<li>\(\forall i: 0 \leq i \leq b - 1 \implies d_i &lt; b - 1\).
(\(N_b\) does not contain a digit which is the largest possible digit
in base \(b\) ((\(b - 1\))). Suppose \(N_b\) does contain such a digit. 
Then by point ii, \(N_b\) contains a \(1\), and all other digits
are \(0\). If \(b = 2\) that would imply that \(N_2 = 11\), but
\(11\) clearly is not self describing. Otherwise \(d_0 > 0\)
(by point i); \(d_1 > 0\) (since \(N_b\) contains at least one
\(1\)), and all other digits are \(0\). But that means that
\(d_{b-1}\) is \(0\), which contradicts that \(N_b\) contains
the digit \(b - 1\).</li>
<li>\(b > 2 \implies d_{b-1} = 0\) (The last digit is a \(0\)). This
follows directly from point iii.</li>
<li>\(b > 4 \implies d_0 > 1\). (For bases larger than \(4\), the first
digit cannot be a \(1\).) Suppose \(b > 4\), and \(d_0 = 1\). This
means that \(N_b\) contains just a single \(0\), and this has to
be \(d_{b-1}\) (by point iv). The digits \(d_1 \ldots d_{b-2}\)
have to sum to \(b - 1\) (by point ii) which means that one of
those digits is a \(2\), and the rest are \(1\)s. But then
\(N_b\) contains \(b - 2\) \(1\)s, one \(2\) and one \(0\). And
since \(b > 4\), \(b - 2 > 2\), so \(N_b\) cannot be self-describing.</li>
<li>\(b > 4 \implies d_0 &lt; b - 2\). (For bases larger than \(4\),
the first digit cannot be \(b - 2\)). Suppose we would have a
self-describing number \(N_b\), with \(d_0 = b - 2\). That means
that only one of the digits \(d_1, d_2, \cdots, d_{b-1}\) is non-zero.
Let \(d_k\) be this non-zero digit. By point ii, \(d_k = 2\), and 
by point i, \(k > 0\). But that implies that \(N_b\) contains
the digit \(k\) twice. However, \(N_b\) contains the digit \(b - 2\)
once (we did assume \(d_0 = b - 2\)), the digit \(2\) once, and 
the digit \(0\), \(b - 2\) times. \(b > 4 \implies b - 2 > 2\), so
the number cannot be self-describing.</li>
</ol>

<p>We're now ready to derive the first three self-describing numbers.</p>

<ol>
<li>There cannot be any self-describing numbers for base \(b = 1\). 
The only digits in that base are \(0\), but we cannot have a
leading \(0\).</li>
<li>For base \(2\), point i implies any \(N_2\)
must start with a \(1\). But constradicts point iii, so we 
cannot have a self-describing number in base \(2\).</li>
<li>For base \(3\), points i and iii imply that for any \(N_3\)
\(d_0 = 1\) (the first digit). Point iv implies the number end
with a \(0\), so \(d_2 = 0\). Then, by point ii, \(d_1 = 2\),
but this contradicts point iii.
So there cannot be any self-describing numbers in base \(3\).</li>
<li>For base \(4\), points ii and iii imply any \(N_4\) has
\(d_0 = 1\) or \(d_1 = 2\). Point iv implies that \(d_3 = 0\).
<ul>
<li>If \(d_0 = 1\), then \(d_1 + d_2 = 3\), so one of them is
\(1\), and the other \(2\). \(d_1\) cannot be \(1\),
because it describes the number of \(1\)s in the number,
and we have 2 of them. So, \(d_1 = 2\) and \(d_2 = 1\).
This does not lead to any contractions, so the first
self-describing number is \(1210\).</li>
<li>If \(d_0 = 2\), then \(d_1 + d_2 = 2\). If \(d_1 = d_2 = 1\),
then we have two \(1\)s, but \(d_1 = 1\), so that would
not be self-describing. Which leaves the possibility one of
\(d_1\) and \(d_2\) is \(0\), and the other \(2\).
\(d_1 = 2\) is not going to work, as that would imply
\(N_4\) has two \(1\)s &mdash; but there are none. If \(d_1 = 0\),
we get \(d_2 = 2\), which does not lead to a contraction,
so the second self-describing number is \(2020\).</li>
</ul></li>
<li>For base \(5\), by points iii, v, and vi, we have one possiblity for
the first digit: \(d_0 = 2\). That means any \(N_5\) contains
contains two \(0\)s, including \(d_4\). Hence, \(d_1 + d_2 + d_3 = 3\),
with one of those digits being \(0\). The other two must therefore be
\(1\), and \(2\). This means \(N_5\) contains two \(2\)s, so
\(d_2 = 2\). There are no \(3\)s, so \(d_3 = 0\), and \(d_1 = 1\).
This makes \(21200\) the third self-describing number.</li>
</ol></div>
</body>
</html>
