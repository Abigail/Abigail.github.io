# Perl Weekly Challenge 139: Long Primes

## [Challenge][task2]
>>>>
Write a script to generate first 5 `Long Primes`.

<blockquote>
A prime number (p) is called Long Prime if (1/p) has an infinite decimal expansion repeating every (p-1) digits.

</blockquote>
<<<<

### Example

\(7\) is a long prime since \(\frac{1}{7} = 0.\overline{1428571}\).
The repeating part (\(142857\)) size is \(6\) i.e. one less
than the prime number \(7\).

Also \(17\) is a long prime since
\(\frac{1}{17} = 0.\overline{0588235294117647}\).
The repeating part (\(0588235294117647\)) size is \(16\) i.e. one less
than the prime number \(17\).

Another example, \(2\) is not a long prime as \(\frac{1}{2} = 0.5\).
There is no repeating part in this case.


[task2]: https://theweeklychallenge.org/blog/perl-weekly-challenge-139/#TASK2


## Discussion

Wikipedia call long primes [Full reptend prime](#wiki).

A naive method would be to take a prime number, and see whether
its decimal fraction repeats. But that means, having to deal
with floating point numbers, and that's hard in general.

For instance, in Perl, even a 64 bit perl, \(\frac{1}{23}\) equals
`0.0434782608695652174`. But that's enough to determine whether
the fraction repeats with period 22 - as we only have 19 digits 
of precision. In many other languages, the situation is similar.

Luckily, there is an alternative way. As the Wikipedia page points
out, for a full reptend prime \(p\), the quotient

\[ \frac{b^{p - 1} - 1}{p} \]

gives a [cyclic number](#wiki), where \(b\) is the base we are
working in (so, for us \(b = 10\)).

Now, \(\frac{b^{p - 1} - 1}{p}\) becomes large quickly if \(p\)
increases. For instance, if \(b = 10\) and \(p = 23\), the quotient
is \(43478260869565217391\) which is larger than a 64 bit integer can 
hold.

We could use big integers to calculate the quotient, but that doesn't
work for languages with no, or poor, support for large integers.

But there is a different way. We don't need the actual quotient. All
we want to know is that the resulting number doesn't contain repeats.
We can do this by performing *long division* and check all the
intermediate results are different.

For instance, if \(b = 10\) and \(p = 7\), \(b^{p - 1} - 1\) equals
\(999999\). Dividing that by \(7\) gives:

\[
  \begin{align*}
    & \text{ }\text{ }142857                                       \\\\
  7 & \overline{\big)999999}                                       \\\\
    & \:\text{ }\underline{7}                                      \\\\
    & \:\text{ }29                                                 \\\\
    & \:\text{ }\underline{28}                                     \\\\
    & \:\text{ }\text{ }\text{ }19                                 \\\\
    & \:\text{ }\text{ }\text{ }\underline{14}                     \\\\
    & \:\text{ }\text{ }\text{ }\text{ }\text{ }59                 \\\\
    & \:\text{ }\text{ }\text{ }\text{ }\text{ }\underline{56}     \\\\
    & \:\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }39 \\\\
    & \:\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }
                \underline{35}                                     \\\\
    & \:\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }
                \text{ }\text{ }49                                 \\\\
    & \:\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }
                \text{ }\text{ }\underline{49}                     \\\\
    & \:\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }
                \text{ }\text{ }\text{ }\text{ }0                  \\\\
  \end{align*}
\]

We are interested in the sequence \(2, 1, 5, 3, 4, 0\). Since it does
not contain duplicates, the quotient doesn't repeat, and hence, \(7\)
is a long prime.

If, on the other hand, we do the same for \(11\), we get:

\[
  \begin{align*}
    & \text{ }\text{ }076923076923                                 \\\\
 13 & \overline{\big)999999999999}                                 \\\\
    & \:\text{ }\underline{0}                                      \\\\
    & \:\text{ }99                                                 \\\\
    & \:\text{ }\underline{91}                                     \\\\
    & \:\text{ }\text{ }\text{ }89                                 \\\\
    & \:\text{ }\text{ }\text{ }\underline{78}                     \\\\
    & \:\text{ }\text{ }\text{ }119                                \\\\
    & \:\text{ }\text{ }\text{ }\underline{117}                    \\\\
    & \:\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }29 \\\\
    & \:\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }
                \underline{26}                                     \\\\
    & \:\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }
                \text{ }\text{ }39                                 \\\\
    & \:\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }
                \text{ }\text{ }\underline{39}                     \\\\
    & \:\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }
                \text{ }\text{ }\text{ }\text{ }09                 \\\\
    & \:\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }
                \text{ }\text{ }\text{ }\text{ }\text{ }\text{ }
                \underline{0}                                      \\\\
    & \:\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }\text{ }
                \text{ }\text{ }\text{ }\text{ }\text{ }\text{ }
                \cdots                                             \\\\
  \end{align*}
\]

Now, the sequence we are interested in starts with
\(9, 8, 11, 2, 3, 0, 9, \ldots\). As soon as we have seen the
second \(9\), we know the quotient will repeat, and hence,
\(11\) is not a long prime.
